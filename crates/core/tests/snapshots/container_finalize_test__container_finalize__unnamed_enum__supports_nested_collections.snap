---
source: crates/core/tests/container_finalize_test.rs
expression: pretty(container.impl_partial_finalize())
---
fn finalize(
    self,
    context: &Self::Context,
) -> std::result::Result<Self, schematic::ConfigError> {
    Ok(
        match self {
            Self::A(pa) => {
                Self::A({
                    let mut list = Vec::default();
                    for item in pa {
                        list.push(item.finalize(context)?);
                    }
                    list
                })
            }
            Self::B(pa) => {
                Self::B(
                    transform_config(
                        {
                            let mut map = HashMap::default();
                            for (key, value) in pa {
                                map.insert(key, value.finalize(context)?);
                            }
                            map
                        },
                        context,
                    )?,
                )
            }
            Self::C(pa) => {
                Self::C(
                    transform_config(
                        match pa {
                            Some(pa) => {
                                let mut set = BTreeSet::default();
                                for item in pa {
                                    set.insert(item.finalize(context)?);
                                }
                                set
                            }
                            None => None,
                        },
                        context,
                    )?,
                )
            }
            _ => self,
        },
    )
}
